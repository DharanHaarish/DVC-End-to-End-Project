schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/raw_data.csv
      hash: md5
      md5: 4af6ffba52209b50525de3a231f6f47a
      size: 23830
    - path: src/preprocess.py
      hash: md5
      md5: d19f1e9b3ac0d5d61ba52a8639391235
      size: 2891
    params:
      params.yaml:
        preprocess.method: iqr
        preprocess.window: 15
    outs:
    - path: data/processed/df_test.csv
      hash: md5
      md5: f95dead1171f729a38ccce30f5373fc3
      size: 4904
    - path: data/processed/df_train.csv
      hash: md5
      md5: a5f56f1fc45247583b5a1a14c0dfa8bb
      size: 18907
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/df_test.csv
      hash: md5
      md5: f95dead1171f729a38ccce30f5373fc3
      size: 4904
    - path: data/processed/df_train.csv
      hash: md5
      md5: a5f56f1fc45247583b5a1a14c0dfa8bb
      size: 18907
    - path: src/train.py
      hash: md5
      md5: 71352adc0e23d1aeb122f70696589c84
      size: 1476
    params:
      params.yaml:
        train.base: 2
        train.hyperparameters:
          seasonality_mode: multiplicative
          changepoint_prior_scale: 0.01
          seasonality_prior_scale: 10.0
          holidays_prior_scale: 10.0
          changepoint_range: 0.8
        train.transform: log
    outs:
    - path: models/prophet_model.pkl
      hash: md5
      md5: 58ef605d1be32f3e709aceb1cbe28436
      size: 86471
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed/df_test.csv
      hash: md5
      md5: f95dead1171f729a38ccce30f5373fc3
      size: 4904
    - path: models/prophet_model.pkl
      hash: md5
      md5: 58ef605d1be32f3e709aceb1cbe28436
      size: 86471
    - path: src/evaluate.py
      hash: md5
      md5: e2f926bd1dbf41c1c7a0e2cd63d15c4c
      size: 1975
    params:
      params.yaml:
        evaluate.base: 2
        evaluate.transform: log
    outs:
    - path: metrics.json
      hash: md5
      md5: 4f9c934a82ae2cf1193e23c3086ae7da
      size: 126
